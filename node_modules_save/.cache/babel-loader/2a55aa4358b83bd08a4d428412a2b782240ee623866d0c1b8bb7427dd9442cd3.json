{"ast":null,"code":"// grab our db client connection to use with our adapters\nconst client = require('../client');\nasync function createUser(data) {\n  try {\n    const {\n      rows: [user]\n    } = await client.query(`\n       INSERT INTO users(username, password) \n      VALUES($1, $2) RETURNING *;\n     `, [data.username, data.password]);\n    delete user.password;\n    return user;\n  } catch (error) {\n    throw error;\n  }\n}\nasync function getAllUsers(data) {\n  /* this adapter should fetch a list of users from your db */\n  try {\n    const {\n      rows: [user]\n    } = await client.query(`\n    SELECT *\n    FROM users\n    WHERE username=$1;\n    `, [data.username]);\n    if (user.password !== data.password) {\n      return;\n    }\n    delete user.password;\n    return user;\n  } catch (error) {\n    throw error;\n  }\n}\nasync function getUserById(userId) {\n  try {\n    const {\n      rows: [user]\n    } = await client.query(`\n      SELECT *\n      FROM users\n      WHERE id=$1;\n      `, [userId]);\n    delete user.password;\n    return user;\n  } catch (error) {\n    throw error;\n  }\n}\nasync function getUserByUsername(userName) {\n  try {\n    const {\n      rows: [user]\n    } = await client.query(`\n    SELECT *\n    FROM users\n    WHERE username=$1;\n    `, [userName]);\n    return user;\n  } catch (error) {\n    throw error;\n  }\n}\nmodule.exports = {\n  // add your database adapter fns here\n  createUser,\n  getAllUsers,\n  getUserById,\n  getUserByUsername\n};","map":{"version":3,"names":["client","require","createUser","data","rows","user","query","username","password","error","getAllUsers","getUserById","userId","getUserByUsername","userName","module","exports"],"sources":["/Users/ssmith_1989/pie-or-dye/src/db/users.js"],"sourcesContent":["// grab our db client connection to use with our adapters\nconst client = require('../client');\n\nasync function createUser(data) \n{\n  \n  try {\n     const { rows: [user] } = await client.query(`\n       INSERT INTO users(username, password) \n      VALUES($1, $2) RETURNING *;\n     `, [data.username, data.password]);\n    delete user.password;\n    return user;\n   } catch (error) {\n     throw error;\n   }\n}\n\n\nasync function getAllUsers(data) {\n  /* this adapter should fetch a list of users from your db */\n    try {\n    const { rows: [user] } = await client.query(`\n    SELECT *\n    FROM users\n    WHERE username=$1;\n    `, [data.username]);\n\n    if (user.password !== data.password) {\n      return;\n    }\n    delete user.password;\n    return user;\n\n  } catch (error) {\n    throw error;\n  }\n}\n\nasync function getUserById(userId) {\n\n    try {\n      const { rows: [user] } = await client.query(`\n      SELECT *\n      FROM users\n      WHERE id=$1;\n      `, [userId])\n    \n     delete user.password;\n      return user;\n  \n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async function getUserByUsername(userName) {\n  try {\n    const { rows: [user] } = await client.query(`\n    SELECT *\n    FROM users\n    WHERE username=$1;\n    `, [userName])\n  \n    \n    return user;\n\n  } catch (error) {\n    throw error;\n  }\n}\n\nmodule.exports = {\n  // add your database adapter fns here\n  createUser,\n  getAllUsers,\n  getUserById,\n  getUserByUsername\n};"],"mappings":"AAAA;AACA,MAAMA,MAAM,GAAGC,OAAO,CAAC,WAAW,CAAC;AAEnC,eAAeC,UAAUA,CAACC,IAAI,EAC9B;EAEE,IAAI;IACD,MAAM;MAAEC,IAAI,EAAE,CAACC,IAAI;IAAE,CAAC,GAAG,MAAML,MAAM,CAACM,KAAK,CAAE;AAClD;AACA;AACA,MAAM,EAAE,CAACH,IAAI,CAACI,QAAQ,EAAEJ,IAAI,CAACK,QAAQ,CAAC,CAAC;IACnC,OAAOH,IAAI,CAACG,QAAQ;IACpB,OAAOH,IAAI;EACZ,CAAC,CAAC,OAAOI,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACH;AAGA,eAAeC,WAAWA,CAACP,IAAI,EAAE;EAC/B;EACE,IAAI;IACJ,MAAM;MAAEC,IAAI,EAAE,CAACC,IAAI;IAAE,CAAC,GAAG,MAAML,MAAM,CAACM,KAAK,CAAE;AACjD;AACA;AACA;AACA,KAAK,EAAE,CAACH,IAAI,CAACI,QAAQ,CAAC,CAAC;IAEnB,IAAIF,IAAI,CAACG,QAAQ,KAAKL,IAAI,CAACK,QAAQ,EAAE;MACnC;IACF;IACA,OAAOH,IAAI,CAACG,QAAQ;IACpB,OAAOH,IAAI;EAEb,CAAC,CAAC,OAAOI,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF;AAEA,eAAeE,WAAWA,CAACC,MAAM,EAAE;EAE/B,IAAI;IACF,MAAM;MAAER,IAAI,EAAE,CAACC,IAAI;IAAE,CAAC,GAAG,MAAML,MAAM,CAACM,KAAK,CAAE;AACnD;AACA;AACA;AACA,OAAO,EAAE,CAACM,MAAM,CAAC,CAAC;IAEb,OAAOP,IAAI,CAACG,QAAQ;IACnB,OAAOH,IAAI;EAEb,CAAC,CAAC,OAAOI,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF;AAEA,eAAeI,iBAAiBA,CAACC,QAAQ,EAAE;EAC3C,IAAI;IACF,MAAM;MAAEV,IAAI,EAAE,CAACC,IAAI;IAAE,CAAC,GAAG,MAAML,MAAM,CAACM,KAAK,CAAE;AACjD;AACA;AACA;AACA,KAAK,EAAE,CAACQ,QAAQ,CAAC,CAAC;IAGd,OAAOT,IAAI;EAEb,CAAC,CAAC,OAAOI,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF;AAEAM,MAAM,CAACC,OAAO,GAAG;EACf;EACAd,UAAU;EACVQ,WAAW;EACXC,WAAW;EACXE;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}